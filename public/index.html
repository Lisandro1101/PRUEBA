<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Recuerdos de la Abejita üêù</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ‚≠êÔ∏è SOLUCI√ìN: Importaci√≥n de la lista COMPLETA de Google Fonts ‚≠êÔ∏è -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bangers&family=Caveat&family=Creepster&family=EB+Garamond&family=Inter&family=Lato&family=Lobster&family=Lora&family=Luckiest+Guy&family=Merriweather&family=Montserrat&family=Nunito&family=Open+Sans&family=Oswald&family=PT+Serif&family=Pacifico&family=Playfair+Display&family=Poppins&family=Press+Start+2P&family=Righteous&family=Roboto&family=Roboto+Mono&family=Special+Elite&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css"> 
    <style>
        /* Estilos CSS m√≠nimos para el funcionamiento instant√°neo */
        .file-input-wrapper { display: block; width: 100%; margin-bottom: 8px; position: relative; overflow: hidden; }
        .file-input-wrapper input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; height: 100%; width: 100%; }
        
        /* üö® CORRECCI√ìN MEN√ö FLOTANTE */

        /* 1. Ocultar por defecto usando la clase */
        .hidden-dropdown {
            display: none !important;
        }

        /* 2. Estilos para que el men√∫ flote */
        #juegos-dropdown {
            position: absolute; /* Saca el men√∫ del flujo normal */
            top: 100%; /* Lo posiciona justo debajo de su contenedor padre (el div relativo) */
            left: 0;
            right: 0;
            z-index: 50; /* Asegura que est√© por encima del contenido de abajo */
            
            /* Estilos visuales para el panel flotante */
            margin-top: 0.5rem; /* Peque√±a separaci√≥n del bot√≥n */
            background-color: white;
            border-radius: 1.5rem; /* 24px */
            padding: 1.5rem; /* 24px */
            border: 1px solid #e2e8f0; /* Borde suave */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); /* Sombra para dar efecto "flotante" */
        }
        
        /* --- ‚≠êÔ∏è NUEVO: MOTOR DE TEMAS ‚≠êÔ∏è --- */
        /* Estas reglas leen las variables que super-admin.html guarda */
        
        /* * Aplica los estilos al contenedor principal del portal
         * (Usa las variables de "Personalizaci√≥n del Portal")
        */
        .portal-container {
            background-color: var(--portal-bg);
            border-radius: var(--portal-border-radius);
        }

        /* Aplica los estilos al H1 principal */
        .portal-container h1 {
            color: var(--portal-title-color);
            font-size: var(--portal-title-font-size);
        }

        /* Aplica estilos al texto de bienvenida */
        #portal-greeting-text {
            color: var(--portal-greeting-color);
            font-size: var(--portal-greeting-font-size);
        }
        /* Aplica estilos al subt√≠tulo */
        #portal-subtitle-text {
            color: var(--portal-subtitle-color);
            font-size: var(--portal-subtitle-font-size);
        }
        /* ‚≠êÔ∏è NUEVO: Aplica estilos al t√≠tulo de la secci√≥n de recuerdos */
        #memories-section-title-text {
            color: var(--memories-section-title-color);
        }

        /* ‚≠êÔ∏è NUEVO: Aplica estilos al t√≠tulo de la lista de recuerdos */
        #memories-list-title-text {
            color: var(--memories-list-title-color);
            font-size: var(--memories-list-title-font-size);
        }

        
        /* * Aplica los estilos a los botones del portal.
         * Asumimos que .btn-portal est√° definido en tu 'style.css'.
         * Estas reglas SOBRESCRIBIR√ÅN los valores de ese archivo
         * con los valores de la base de datos.
        */
        .btn-portal {
            background-color: var(--btn-portal-bg);
            color: var(--btn-portal-text-color);
            border-radius: var(--btn-portal-border-radius);
            
            /* * Asumimos que tu .btn-portal usa un box-shadow de 4px.
             * Si tu 'style.css' lo define diferente,
             * deber√°s ajustar esto o a√±adir m√°s variables.
            */
            box-shadow: 0 4px var(--btn-portal-shadow-color);
            border: 2px solid var(--btn-portal-shadow-color)
        }

        /* ‚≠êÔ∏è NUEVO: Estilos para los botones del men√∫ de juegos */
        .juegos-dropdown-item {
            background-color: var(--btn-juegos-menu-bg, var(--spring-green));
            color: var(--btn-juegos-menu-text-color, white);
            border-color: var(--btn-juegos-menu-border-color, var(--spring-shadow));
            box-shadow: 0 4px var(--btn-juegos-menu-shadow-color, var(--spring-shadow));
            border-radius: var(--btn-juegos-menu-border-radius, 1.5rem);
        }

        /* --- ‚≠êÔ∏è FIN DEL MOTOR DE TEMAS ‚≠êÔ∏è --- */

    </style>
</head>
<body>

    <a href="ranking.html" target="_blank" id="ranking-trophy-btn" title="Ver Rankings"><span class="icon-ranking">üèÜ</span></a>

    <div class="portal-container py-6 sm:py-8" style="position: relative; z-index: 1;"> 
        <header class="mb-6">
            <p id="portal-greeting-text" class="text-lg text-gray-500 uppercase font-semibold">¬°Bienvenido a la Colmena!</p>
            
            <h1 id="portal-title-text">Portal de Recuerdos <span class="icon-main">üêù</span></h1>
            
            <p id="portal-subtitle-text" class="text-gray-600 mt-2 text-xl">Deja un mensaje, una foto o video capturado.</p>
        </header>

        <div style="position: relative;">
            
            <button id="menu-juegos-toggle" class="btn-portal btn-messages">
                <span class="mr-3 text-2xl icon-games">üïπÔ∏è</span>
                MEN√ö DE JUEGOS
                <span class="ml-3 text-xl">‚ñº</span>
            </button>

            <div id="juegos-dropdown" class="hidden-dropdown">
                <h3 class="text-xl font-black text-gray-800 mb-4 text-center">¬°A Jugar!</h3>
                
                <div class="space-y-3">
                    <a href="player.html" class="btn-portal btn-trivia juegos-dropdown-item">
                        <span class="mr-3 text-2xl icon-trivia">‚úçÔ∏è</span>
                        <span id="juegos-menu-trivia-text">¬øCuanto conoces a Amo?</span>
                    </a>
                <a href="memory.html" class="btn-portal btn-trivia juegos-dropdown-item">
                        <span class="mr-3 text-2xl icon-memory">üß†</span>
                        <span id="juegos-menu-memory-text">Memoria con Amo</span>
                    </a>
                    <a href="hangman.html" class="btn-portal btn-trivia juegos-dropdown-item">
                        <span class="mr-3 text-2xl icon-hangman">üíÄ</span>
                        <span id="juegos-menu-hangman-text">Ahorcado</span>
                    </a>
                </div>
                <button id="cerrar-menu" class="text-sm text-gray-600 hover:text-gray-800 mt-4 w-full">
                    Cerrar
                </button>
            </div>

        </div> 
        
        <section class="py-4 rounded-xl border border-gray-200 memory-section-bg">
            <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center justify-center space-x-2">
                <span class="text-2xl icon-memories">üíñ</span>
                <span id="memories-section-title-text">Deja tu Recuerdo</span>
            </h2>

            <form id="memory-form" class="transparent-form py-6 rounded-lg shadow-md mb-4 space-y-4">
                <textarea id="guest-message" placeholder="Deja un comentario (opcional)"
                          class="textarea-bee w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 h-24 resize-none"></textarea>

                
                <div class="flex flex-col space-y-2 w-full"> 
                    
                    <div class="file-input-wrapper w-full">
                        <label for="guest-file-photo" class="btn-portal btn-messages">
                            <span class="mr-1">üì∏</span> Capturar Foto
                        </label>
                        <input type="file" id="guest-file-photo" 
                               accept="image/*" 
                               capture="camera"> 
                    </div>
                    
                    <div class="file-input-wrapper w-full">
                        <label for="guest-file-video" class="btn-portal btn-messages">
                            <span class="mr-1">üé•</span> Grabar Video
                        </label>
                        <input type="file" id="guest-file-video" 
                               accept="video/*" 
                               capture="camcorder"> 
                    </div>
                </div>
                           
                <p id="file-name-display" class="text-sm text-gray-600 italic mt-2"></p>
                
                <div id="upload-progress-bar-container" class="hidden">
                    <p id="upload-status" class="text-xs text-gray-600 mb-1 text-left">Subiendo...</p>
                    <div id="upload-progress-bar"><div id="upload-progress"></div></div>
                </div>

                <button type="submit" id="submit-memory-btn" class="btn-portal btn-messages h-12 mt-4">
                    Enviar Recuerdo <span class="icon-portal">üéÅ</span>
                </button>
            </form>

            <h3 id="memories-list-title-text" class="text-lg font-bold mb-2 text-gray-700">Recuerdos de la Colmena</h3>
            <div id="memories-list" class="space-y-4 max-h-[40rem] overflow-y-auto p-2 border border-dashed border-gray-300 rounded-lg bg-white">
                <p class="text-sm text-gray-500 italic">Cargando mensajes...</p>
            </div>
            
        </section>

    </div>

    <script type="module" src="portalScript.js?v=1.0"></script>

    <!-- ‚≠êÔ∏è NUEVO: Modal para pedir el nombre del invitado ‚≠êÔ∏è -->
    <div id="guest-name-modal" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-[10000]" style="display: none;">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">¬°Bienvenido/a!</h2>
            <p class="text-gray-600 mb-6">Para continuar, por favor ingresa tu nombre.</p>
            <form id="guest-name-form">
                <input type="text" id="modal-guest-name-input" required placeholder="Tu Nombre" class="input-bee w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 mb-4" maxlength="30">
                <button type="submit" class="btn-portal btn-messages w-full">Continuar</button>
            </form>
        </div>
    </div>
    <!-- Fin del Modal -->

    <div id="custom-toast-message" class="custom-toast">
        Recuerdo grabajo en el coraz√≥n ¬°Gracias por estar, te queremos!
    </div>

</body>
</html>